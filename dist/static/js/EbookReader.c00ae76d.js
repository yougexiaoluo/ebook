(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["EbookReader"],{"28a5":function(t,e,i){"use strict";var n=i("aae3"),o=i("cb7c"),s=i("ebd6"),a=i("0390"),r=i("9def"),u=i("5f1b"),h=i("520a"),f=i("79e5"),c=Math.min,l=[].push,d="split",m="length",v="lastIndex",b=4294967295,p=!f(function(){RegExp(b,"y")});i("214f")("split",2,function(t,e,i,f){var g;return g="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[m]||2!="ab"[d](/(?:ab)*/)[m]||4!="."[d](/(.?)(.?)/)[m]||"."[d](/()()/)[m]>1||""[d](/.?/)[m]?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(o,t,e);var s,a,r,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,d=void 0===e?b:e>>>0,p=new RegExp(t.source,f+"g");while(s=h.call(p,o)){if(a=p[v],a>c&&(u.push(o.slice(c,s.index)),s[m]>1&&s.index<o[m]&&l.apply(u,s.slice(1)),r=s[0][m],c=a,u[m]>=d))break;p[v]===s.index&&p[v]++}return c===o[m]?!r&&p.test("")||u.push(""):u.push(o.slice(c)),u[m]>d?u.slice(0,d):u}:"0"[d](void 0,0)[m]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,n):g.call(String(o),i,n)},function(t,e){var n=f(g,t,this,e,g!==i);if(n.done)return n.value;var h=o(t),l=String(this),d=s(h,RegExp),m=h.unicode,v=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(p?"y":"g"),k=new d(p?h:"^(?:"+h.source+")",v),y=void 0===e?b:e>>>0;if(0===y)return[];if(0===l.length)return null===u(k,l)?[l]:[];var S=0,O=0,w=[];while(O<l.length){k.lastIndex=p?O:0;var x,F=u(k,p?l:l.slice(O));if(null===F||(x=c(r(k.lastIndex+(p?0:O)),l.length))===S)O=a(l,O,m);else{if(w.push(l.slice(S,O)),w.length===y)return w;for(var T=1;T<=F.length-1;T++)if(w.push(F[T]),w.length===y)return w;O=S=x}}return w.push(l.slice(S)),w}]})},"3fdc":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-reader"},[i("div",{attrs:{id:"read"}}),i("div",{staticClass:"ebook-reader-mask",on:{click:t.onMaskClick,touchmove:t.move,touchend:t.moveEnd,mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.mouseDown(e)},mousemove:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.mouseMove(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?null:"button"in e&&0!==e.button?null:t.mouseUp(e)}}})])},o=[],s=i("7bee"),a=s["a"],r=(i("7fdc"),i("2877")),u=Object(r["a"])(a,n,o,!1,null,"33ab53ba",null);e["default"]=u.exports},"5df3":function(t,e,i){"use strict";var n=i("02f4")(!0);i("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},"7bee":function(t,e,i){"use strict";(function(t){i("5df3"),i("ac6a"),i("7f7f"),i("28a5");var n=i("a211"),o=i("02ae"),s=i("5de6"),a=i("e8ec"),r=i("101f");t.ePub=n["a"],e["a"]={mounted:function(){var t=this,e=this.$route.params.fileName.split("|"),i=e[1];Object(r["b"])(i,function(i,n){!i&&n?t.setFileName(e.join("/")).then(function(){t.initEpub(n)}):t.setFileName(e.join("/")).then(function(){var e="".concat("http://47.99.166.157/epub","/").concat(t.fileName,".epub");t.initEpub(e)})})},mixins:[o["a"]],methods:{initEpub:function(t){var e=this;this.book=new n["a"](t),this.setCurrentBook(this.book),this.initRendition(),this.parseBook(),this.book.ready.then(function(){return e.book.locations.generate(window.innerWidth/375*750*Object(a["e"])(e.fileName)/16)}).then(function(t){e.setBookAvailable(!0),e.refreshLocation()})},prevPage:function(){var t=this;this.rendition&&(this.rendition.prev().then(function(){t.refreshLocation()}),this.hideTitleAndMenu())},nextPage:function(){var t=this;this.rendition&&(this.rendition.next().then(function(){t.refreshLocation()}),this.hideTitleAndMenu())},toggleTitleAndMenu:function(){this.menuVisible&&(this.setSettingVisible(-1),this.setFontFamilyVisible(!1)),this.setMenuVisible(!this.menuVisible)},initFontSize:function(){var t=Object(a["e"])(this.fileName);t?(this.setDefaultFontSize(t),this.rendition.themes.fontSize(t)):Object(a["o"])(this.fileName,this.defaultFontSize)},initFontFamily:function(){var t=Object(a["d"])(this.fileName);t?(this.rendition.themes.font(t),this.setDefaultFontFamily(t)):Object(a["n"])(this.fileName,this.defaultFontFamily)},initTheme:function(){var t=this,e=Object(a["j"])(this.fileName);e||(e=this.themeList[0].name,Object(a["s"])(this.fileName,e)),this.setDefaultTheme(e),this.themeList.forEach(function(e){t.rendition.themes.register(e.name,e.style)}),this.rendition.themes.select(e)},initRendition:function(){var t=this;this.rendition=this.book.renderTo("read",{width:innerWidth,height:innerHeight,method:"default"});var e=Object(a["h"])(this.fileName);this.display(e,function(){t.initTheme(),t.initFontFamily(),t.initFontSize(),t.initGlobalStyle()}),this.rendition.hooks.content.register(function(t){Promise.all([t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/family/cabin.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/family/daysOne.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/family/montserrat.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/family/tangerine.css"))]).then(function(){})})},initGesture:function(){var t=this;this.rendition.on("touchstart",function(e){t.touchStartX=e.changedTouches[0].clientX,t.startTime=e.timeStamp}),this.rendition.on("touchend",function(e){var i=e.changedTouches[0].clientX-t.touchStartX,n=e.timeStamp-t.startTime;n<500&&i>40?t.prevPage():n<500&&i<-40?t.nextPage():t.toggleTitleAndMenu(),t.defaultBehavior(e)})},parseBook:function(){var t=this;this.book.loaded.cover.then(function(e){t.book.archive.createUrl(e).then(function(e){t.setCover(e)})}),this.book.loaded.metadata.then(function(e){t.setMetadata(e)}),this.book.loaded.navigation.then(function(e){var i=Object(s["d"])(e.toc);function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.parent?n(i.filter(function(e){return e.id===t.parent})[0],++e):e}i.forEach(function(t,e){t.level=n(t)}),t.setNavigation(i)})},onMaskClick:function(t){if(!this.mouseState||2!==this.mouseState&&3!==this.mouseState){var e=t.offsetX,i=window.innerWidth;e>0&&e<.3*i?this.prevPage():e>0&&e>.7*i?this.nextPage():this.toggleTitleAndMenu()}},move:function(t){var e=0;this.firstOffsetY?(e=t.changedTouches[0].clientY-this.firstOffsetY,this.setOffsetY(e),this.defaultBehavior(t)):this.firstOffsetY=t.changedTouches[0].clientY},moveEnd:function(t){this.firstOffsetY=0,this.setOffsetY(0)},mouseDown:function(t){this.mouseState=1,this.mosueStartTime=t.timeStamp,this.defaultBehavior(t)},mouseMove:function(t){if(1===this.mouseState)this.mouseState=2;else if(2===this.mouseState){var e=0;this.firstOffsetY?(e=t.clientY-this.firstOffsetY,this.setOffsetY(e)):this.firstOffsetY=t.clientY}this.defaultBehavior(t)},mouseUp:function(t){2===this.mouseState?(this.firstOffsetY=null,this.setOffsetY(0),this.mouseState=3):this.mouseState=4;var e=t.timeStamp-this.mosueStartTime;e<100&&(this.mouseState=4),this.defaultBehavior(t)},defaultBehavior:function(t){t.preventDefault(),t.stopPropagation()}}}}).call(this,i("c8ba"))},"7f7f":function(t,e,i){var n=i("86cc").f,o=Function.prototype,s=/^\s*function ([^ (]*)/,a="name";a in o||i("9e1e")&&n(o,a,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},"7fdc":function(t,e,i){"use strict";var n=i("dc2d"),o=i.n(n);o.a},aae3:function(t,e,i){var n=i("d3f4"),o=i("2d95"),s=i("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==o(t))}},dc2d:function(t,e,i){}}]);
//# sourceMappingURL=EbookReader.c00ae76d.js.map